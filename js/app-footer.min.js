"ontouchstart"in document.documentElement||(document.documentElement.className+=" no-touch"),$(function(){FastClick.attach(document.body)}),$(function(){var a={url:"data-original",navbar:!1,toolbar:!1,tooltip:!1,fullscreen:!1,keyboard:!1,title:!1};$(".viewer").viewer(a)}),document.addEventListener("touchmove",function(a){a.preventDefault()});var scrollingDiv=document.getElementById("quiz");scrollingDiv.addEventListener("touchmove",function(a){a.stopPropagation()});var clickEventType=null!==document.ontouchstart?"click":"touchstart";$(".menu-button").on(clickEventType,function(a){"touchstart"==a.type?(a.preventDefault(),$("#menu").hasClass("menu-active")?(setTimeout(function(){$("body").removeClass("overflow-hidden"),$("html").removeClass("overflow-hidden")},500),$("#menu-open-overlay").removeClass("menu-open-overlay-active"),$(".menu-open-background").removeClass("menu-open-background-fade"),setTimeout(function(){$("#menu").removeClass("menu-active")},100),$(".wrapper-outer").removeClass("wrapper-outer-active-position"),$(".wrapper-outer").removeClass("wrapper-outer-active-scale"),$(".showing").removeClass("showing-hide"),$(".post-nav").removeClass("post-nav-fade"),$(".post-nav").removeClass("post-nav-hide")):($("#menu-open-overlay").addClass("menu-open-overlay-active"),$(".menu-open-background").addClass("menu-open-background-fade"),$(".wrapper-outer").addClass("wrapper-outer-active-scale"),$(".wrapper-outer").addClass("wrapper-outer-active-position"),$(".showing").addClass("showing-hide"),$(".post-nav").addClass("post-nav-fade"),setTimeout(function(){$(".post-nav").addClass("post-nav-hide")},500),$("#menu").addClass("menu-active"),setTimeout(function(){$("body").addClass("overflow-hidden"),$("html").addClass("overflow-hidden")},750))):"click"==a.type&&($("#menu").hasClass("menu-active")?(setTimeout(function(){$("body").removeClass("overflow-hidden"),$("html").removeClass("overflow-hidden")},500),$("#menu-open-overlay").removeClass("menu-open-overlay-active"),$(".menu-open-background").removeClass("menu-open-background-fade"),setTimeout(function(){$("#menu").removeClass("menu-active")},100),$(".wrapper-outer").removeClass("wrapper-outer-active-position"),$(".wrapper-outer").removeClass("wrapper-outer-active-scale"),$(".showing").removeClass("showing-hide"),$(".post-nav").removeClass("post-nav-fade"),$(".post-nav").removeClass("post-nav-hide")):($("#menu-open-overlay").addClass("menu-open-overlay-active"),$(".menu-open-background").addClass("menu-open-background-fade"),$(".wrapper-outer").addClass("wrapper-outer-active-scale"),$(".wrapper-outer").addClass("wrapper-outer-active-position"),$(".showing").addClass("showing-hide"),$(".post-nav").addClass("post-nav-fade"),setTimeout(function(){$(".post-nav").addClass("post-nav-hide")},500),$("#menu").addClass("menu-active"),setTimeout(function(){$("body").addClass("overflow-hidden"),$("html").addClass("overflow-hidden")},750)))}),function(a){jQuery.fn.placeholder=function(){"undefined"==typeof document.createElement("input").placeholder&&jQuery("[placeholder]").focus(function(){var b=a(this);b.val()==b.attr("placeholder")&&(b.val(""),b.removeClass("placeholder"))}).blur(function(){var b=a(this);""!=b.val()&&b.val()!=b.attr("placeholder")||(b.addClass("placeholder"),b.val(b.attr("placeholder")))}).blur().parents("form").submit(function(){jQuery(this).find("[placeholder]").each(function(){var b=a(this);b.val()==b.attr("placeholder")&&b.val("")})})}}(jQuery),jQuery.fn.placeholder(),!function(a){"function"==typeof define&&define.amd?define("viewer",["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return"string"==typeof a}function c(a){return"number"==typeof a&&!isNaN(a)}function d(a){return"undefined"==typeof a}function e(a,b){var d=[];return c(b)&&d.push(b),d.slice.apply(a,d)}function f(a,b){var c=e(arguments,2);return function(){return a.apply(b,c.concat(e(arguments)))}}function g(a){var b=[],d=a.rotate,e=a.scaleX,f=a.scaleY;return c(d)&&b.push("rotate("+d+"deg)"),c(e)&&c(f)&&b.push("scale("+e+","+f+")"),b.length?b.join(" "):"none"}function h(a){return a.offsetWidth}function i(a){return b(a)?a.replace(/^.*\//,"").replace(/[\?&#].*$/,""):""}function j(a,b){var c;return a.naturalWidth?b(a.naturalWidth,a.naturalHeight):(c=document.createElement("img"),c.onload=function(){b(this.width,this.height)},void(c.src=a.src))}function k(b){var c=b.length,d=0,e=0;return c&&(a.each(b,function(a,b){d+=b.pageX,e+=b.pageY}),d/=c,e/=c),{pageX:d,pageY:e}}function l(a){switch(a){case 2:return v;case 3:return w;case 4:return x}}function m(b,c){this.$element=a(b),this.options=a.extend({},m.DEFAULTS,a.isPlainObject(c)&&c),this.isImg=!1,this.isBuilt=!1,this.isShown=!1,this.isViewed=!1,this.isFulled=!1,this.isPlayed=!1,this.wheeling=!1,this.playing=!1,this.fading=!1,this.tooltiping=!1,this.transitioning=!1,this.action=!1,this.target=!1,this.timeout=!1,this.index=0,this.length=0,this.init()}var n=a(window),o=a(document),p="viewer",q=document.createElement(p),r="viewer-fixed",s="viewer-open",t="viewer-show",u="viewer-hide",v="viewer-hide-xs-down",w="viewer-hide-sm-down",x="viewer-hide-md-down",y="viewer-fade",z="viewer-in",A="viewer-move",B="viewer-active",C="viewer-invisible",D="viewer-transition",E="viewer-fullscreen",F="viewer-fullscreen-exit",G="viewer-close",H="img",I="mousedown touchstart pointerdown MSPointerDown",J="mousemove touchmove pointermove MSPointerMove",K="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",L="wheel mousewheel DOMMouseScroll",M="transitionend",N="load."+p,O="keydown."+p,P="click."+p,Q="resize."+p,R="build."+p,S="built."+p,T="show."+p,U="shown."+p,V="hide."+p,W="hidden."+p,X="view."+p,Y="viewed."+p,Z="undefined"!=typeof q.style.transition,$=Math.round,_=Math.sqrt,aa=Math.abs,ba=Math.min,ca=Math.max,da=Number;m.prototype={constructor:m,init:function(){var b=this.options,c=this.$element,d=c.is(H),e=d?c:c.find(H),f=e.length,g=a.proxy(this.ready,this);f&&(a.isFunction(b.build)&&c.one(R,b.build),this.trigger(R).isDefaultPrevented()||(Z||(b.transition=!1),this.isImg=d,this.length=f,this.count=0,this.$images=e,this.$body=a("body"),b.inline?(c.one(S,a.proxy(function(){this.view()},this)),e.each(function(){this.complete?g():a(this).one(N,g)})):c.on(P,a.proxy(this.start,this))))},ready:function(){this.count++,this.count===this.length&&this.build()},build:function(){var b,c,d,e,f,g,h=this.options,i=this.$element;this.isBuilt||(this.$parent=b=i.parent(),this.$viewer=c=a(m.TEMPLATE),this.$canvas=c.find(".viewer-canvas"),this.$footer=c.find(".viewer-footer"),this.$title=d=c.find(".viewer-title"),this.$toolbar=e=c.find(".viewer-toolbar"),this.$navbar=f=c.find(".viewer-navbar"),this.$button=g=c.find(".viewer-button"),this.$tooltip=c.find(".viewer-tooltip"),this.$player=c.find(".viewer-player"),this.$list=c.find(".viewer-list"),d.addClass(h.title?l(h.title):u),e.addClass(h.toolbar?l(h.toolbar):u),e.find("li[class*=zoom]").toggleClass(C,!h.zoomable),e.find("li[class*=flip]").toggleClass(C,!h.scalable),h.rotatable||e.find("li[class*=rotate]").addClass(C).appendTo(e),f.addClass(h.navbar?l(h.navbar):u),g.toggleClass(u,!h.button),h.inline?(g.addClass(E),c.css("z-index",h.zIndexInline),"static"===b.css("position")&&b.css("position","relative")):(g.addClass(G),c.css("z-index",h.zIndex).addClass([r,y,u].join(" "))),i.after(c),h.inline&&(this.render(),this.bind(),this.isShown=!0),this.isBuilt=!0,a.isFunction(h.built)&&i.one(S,h.built),this.trigger(S))},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$viewer.remove())},bind:function(){var b=this.options,c=this.$element;a.isFunction(b.view)&&c.on(X,b.view),a.isFunction(b.viewed)&&c.on(Y,b.viewed),this.$viewer.on(P,a.proxy(this.click,this)).on(L,a.proxy(this.wheel,this)),this.$canvas.on(I,a.proxy(this.mousedown,this)),o.on(J,this._mousemove=f(this.mousemove,this)).on(K,this._mouseup=f(this.mouseup,this)).on(O,this._keydown=f(this.keydown,this)),n.on(Q,this._resize=f(this.resize,this))},unbind:function(){var b=this.options,c=this.$element;a.isFunction(b.view)&&c.off(X,b.view),a.isFunction(b.viewed)&&c.off(Y,b.viewed),this.$viewer.off(P,this.click).off(L,this.wheel),this.$canvas.off(I,this.mousedown),o.off(J,this._mousemove).off(K,this._mouseup).off(O,this._keydown),n.off(Q,this._resize)},render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initContainer:function(){this.container={width:n.innerWidth(),height:n.innerHeight()}},initViewer:function(){var b,c=this.options,d=this.$parent;c.inline&&(this.parent=b={width:ca(d.width(),c.minWidth),height:ca(d.height(),c.minHeight)}),!this.isFulled&&b||(b=this.container),this.viewer=a.extend({},b)},renderViewer:function(){this.options.inline&&!this.isFulled&&this.$viewer.css(this.viewer)},initList:function(){var c=this.options,d=this.$element,e=this.$list,f=[];this.$images.each(function(d){var e=this.src,g=this.alt||i(e),h=c.url;e&&(b(h)?h=this.getAttribute(h):a.isFunction(h)&&(h=h.call(this,this)),f.push('<li><img src="'+e+'" data-action="view" data-index="'+d+'" data-original-url="'+(h||e)+'" alt="'+g+'"></li>'))}),e.html(f.join("")).find(H).one(N,{filled:!0},a.proxy(this.loadImage,this)),this.$items=e.children(),c.transition&&d.one(Y,function(){e.addClass(D)})},renderList:function(a){var b=a||this.index,c=this.$items.eq(b).width(),d=c+1;this.$list.css({width:d*this.length,marginLeft:(this.viewer.width-c)/2-d*b})},resetList:function(){this.$list.empty().removeClass(D).css("margin-left",0)},initImage:function(b){var c=this.options,d=this.$image,e=this.viewer,f=this.$footer.height(),g=e.width,h=ca(e.height-f,f),i=this.image||{};j(d[0],a.proxy(function(d,e){var f,j,k=d/e,l=g,m=h;h*k>g?m=g/k:l=h*k,l=ba(.9*l,d),m=ba(.9*m,e),j={naturalWidth:d,naturalHeight:e,aspectRatio:k,ratio:l/d,width:l,height:m,left:(g-l)/2,top:(h-m)/2},f=a.extend({},j),c.rotatable&&(j.rotate=i.rotate||0,f.rotate=0),c.scalable&&(j.scaleX=i.scaleX||1,j.scaleY=i.scaleY||1,f.scaleX=1,f.scaleY=1),this.image=j,this.initialImage=f,a.isFunction(b)&&b()},this))},renderImage:function(b){var c=this.image,d=this.$image;d.css({width:c.width,height:c.height,marginLeft:c.left,marginTop:c.top,transform:g(c)}),a.isFunction(b)&&(this.transitioning?d.one(M,b):b())},resetImage:function(){this.$image&&(this.$image.remove(),this.$image=null)},start:function(b){var c=b.target;a(c).is("img")&&(this.target=c,this.show())},click:function(b){var c=a(b.target),d=c.data("action"),e=this.image;switch(d){case"mix":this.isPlayed?this.stop():this.options.inline?this.isFulled?this.exit():this.full():this.hide();break;case"view":this.view(c.data("index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev();break;case"play":this.play();break;case"next":this.next();break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-e.scaleX||-1);break;case"flip-vertical":this.scaleY(-e.scaleY||-1);break;default:this.isPlayed&&this.stop()}},load:function(){var b=this.options,c=this.viewer,d=this.$image;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),d.removeClass(C).css("cssText","width:0;height:0;margin-left:"+c.width/2+"px;margin-top:"+c.height/2+"px;max-width:none!important;visibility:visible;"),this.initImage(a.proxy(function(){d.toggleClass(D,b.transition).toggleClass(A,b.movable),this.renderImage(a.proxy(function(){this.isViewed=!0,this.trigger(Y)},this))},this))},loadImage:function(b){var c=b.target,d=a(c),e=d.parent(),f=e.width(),g=e.height(),h=b.data&&b.data.filled;j(c,function(a,b){var c=a/b,e=f,i=g;g*c>f?h?e=g*c:i=f/c:h?i=f/c:e=g*c,d.css({width:e,height:i,marginLeft:(f-e)/2,marginTop:(g-i)/2})})},resize:function(){this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.isViewed&&this.initImage(a.proxy(function(){this.renderImage()},this)),this.isPlayed&&this.$player.find(H).one(N,a.proxy(this.loadImage,this)).trigger(N)},wheel:function(b){var c=b.originalEvent||b,d=da(this.options.zoomRatio)||.1,e=1;this.isViewed&&(b.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(a.proxy(function(){this.wheeling=!1},this),50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),this.zoom(-e*d,!0,b)))},keydown:function(a){var b=this.options,c=a.which;if(this.isFulled&&b.keyboard)switch(c){case 27:this.isPlayed?this.stop():b.inline?this.isFulled&&this.exit():this.hide();break;case 32:this.isPlayed&&this.stop();break;case 37:this.prev();break;case 38:a.preventDefault(),this.zoom(b.zoomRatio,!0);break;case 39:this.next();break;case 40:a.preventDefault(),this.zoom(-b.zoomRatio,!0);break;case 48:case 49:(a.ctrlKey||a.shiftKey)&&(a.preventDefault(),this.toggle())}},mousedown:function(a){var b,c=this.options,d=a.originalEvent,e=d&&d.touches,f=a,g=!!c.movable&&"move";if(this.isViewed){if(e){if(b=e.length,b>1){if(!c.zoomable||2!==b)return;f=e[1],this.startX2=f.pageX,this.startY2=f.pageY,g="zoom"}else this.isSwitchable()&&(g="switch");f=e[0]}g&&(a.preventDefault(),this.action=g,this.startX=f.pageX||d&&d.pageX,this.startY=f.pageY||d&&d.pageY)}},mousemove:function(a){var b,c=this.options,d=this.action,e=this.$image,f=a.originalEvent,g=f&&f.touches,h=a;if(this.isViewed){if(g){if(b=g.length,b>1){if(!c.zoomable||2!==b)return;h=g[1],this.endX2=h.pageX,this.endY2=h.pageY}h=g[0]}d&&(a.preventDefault(),"move"===d&&c.transition&&e.hasClass(D)&&e.removeClass(D),this.endX=h.pageX||f&&f.pageX,this.endY=h.pageY||f&&f.pageY,this.change(a))}},mouseup:function(a){var b=this.action;b&&(a.preventDefault(),"move"===b&&this.options.transition&&this.$image.addClass(D),this.action=!1)},show:function(){var b,c=this.options;c.inline||this.transitioning||(this.isBuilt||this.build(),a.isFunction(c.show)&&this.$element.one(T,c.show),this.trigger(T).isDefaultPrevented()||(this.$body.addClass(s),b=this.$viewer.removeClass(u),this.$element.one(U,a.proxy(function(){this.view(this.target?this.$images.index(this.target):this.index),this.target=!1},this)),c.transition?(this.transitioning=!0,b.addClass(D),h(b[0]),b.one(M,a.proxy(this.shown,this)).addClass(z)):(b.addClass(z),this.shown())))},hide:function(){var b=this.options,c=this.$viewer;b.inline||this.transitioning||!this.isShown||(a.isFunction(b.hide)&&this.$element.one(V,b.hide),this.trigger(V).isDefaultPrevented()||(this.isViewed&&b.transition?(this.transitioning=!0,this.$image.one(M,a.proxy(function(){c.one(M,a.proxy(this.hidden,this)).removeClass(z)},this)),this.zoomTo(0,!1,!1,!0)):(c.removeClass(z),this.hidden())))},view:function(b){var c,d,e,f,g,h=this.$title;b=Number(b)||0,!this.isShown||this.isPlayed||0>b||b>=this.length||this.isViewed&&b===this.index||this.trigger(X).isDefaultPrevented()||(d=this.$items.eq(b),e=d.find(H),f=e.data("originalUrl"),g=e.attr("alt"),this.$image=c=a('<img src="'+f+'" alt="'+g+'">'),this.isViewed&&this.$items.eq(this.index).removeClass(B),d.addClass(B),this.isViewed=!1,this.index=b,this.image=null,this.$canvas.html(c.addClass(C)),this.renderList(),h.empty(),this.$element.one(Y,a.proxy(function(){var a=this.image,b=a.naturalWidth,c=a.naturalHeight;h.html(g+" ("+b+" &times; "+c+")")},this)),c[0].complete?this.load():(c.one(N,a.proxy(this.load,this)),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(function(){c.removeClass(C),this.timeout=!1},this),1e3)))},prev:function(){this.view(ca(this.index-1,0))},next:function(){this.view(ba(this.index+1,this.length-1))},move:function(a,b){var c=this.image;this.moveTo(d(a)?a:c.left+da(a),d(b)?b:c.top+da(b))},moveTo:function(a,b){var e=this.image,f=!1;d(b)&&(b=a),a=da(a),b=da(b),this.isViewed&&!this.isPlayed&&this.options.movable&&(c(a)&&(e.left=a,f=!0),c(b)&&(e.top=b,f=!0),f&&this.renderImage())},zoom:function(a,b,c){var d=this.image;a=da(a),a=0>a?1/(1-a):1+a,this.zoomTo(d.width*a/d.naturalWidth,b,c)},zoomTo:function(a,b,d,e){var f,g,h,i,j,l=this.options,m=.01,n=100,o=this.image,p=o.width,q=o.height;a=ca(0,a),c(a)&&this.isViewed&&!this.isPlayed&&(e||l.zoomable)&&(e||(m=ca(m,l.minZoomRatio),n=ba(n,l.maxZoomRatio),a=ba(ca(a,m),n)),a>.95&&1.05>a&&(a=1),g=o.naturalWidth*a,h=o.naturalHeight*a,d&&(f=d.originalEvent)?(i=this.$viewer.offset(),j=f.touches?k(f.touches):{pageX:d.pageX||f.pageX||0,pageY:d.pageY||f.pageY||0},o.left-=(g-p)*((j.pageX-i.left-o.left)/p),o.top-=(h-q)*((j.pageY-i.top-o.top)/q)):(o.left-=(g-p)/2,o.top-=(h-q)/2),o.width=g,o.height=h,o.ratio=a,this.renderImage(),b&&this.tooltip())},rotate:function(a){this.rotateTo((this.image.rotate||0)+da(a))},rotateTo:function(a){var b=this.image;a=da(a),c(a)&&this.isViewed&&!this.isPlayed&&this.options.rotatable&&(b.rotate=a,this.renderImage())},scale:function(a,b){var e=this.image,f=!1;d(b)&&(b=a),a=da(a),b=da(b),this.isViewed&&!this.isPlayed&&this.options.scalable&&(c(a)&&(e.scaleX=a,f=!0),c(b)&&(e.scaleY=b,f=!0),f&&this.renderImage())},scaleX:function(a){this.scale(a,this.image.scaleY)},scaleY:function(a){this.scale(this.image.scaleX,a)},play:function(){var b,d=this.options,e=this.$player,f=a.proxy(this.loadImage,this),g=[],h=0,i=0;this.isShown&&!this.isPlayed&&(d.fullscreen&&this.requestFullscreen(),this.isPlayed=!0,e.addClass(t),this.$items.each(function(b){var c=a(this),j=c.find(H),k=a('<img src="'+j.data("originalUrl")+'" alt="'+j.attr("alt")+'">');h++,k.addClass(y).toggleClass(D,d.transition),c.hasClass(B)&&(k.addClass(z),i=b),g.push(k),k.one(N,{filled:!1},f),e.append(k)}),c(d.interval)&&d.interval>0&&(b=a.proxy(function(){this.playing=setTimeout(function(){g[i].removeClass(z),i++,i=h>i?i:0,g[i].addClass(z),b()},d.interval)},this),h>1&&b()))},stop:function(){this.isPlayed&&(this.options.fullscreen&&this.exitFullscreen(),this.isPlayed=!1,clearTimeout(this.playing),this.$player.removeClass(t).empty())},full:function(){var b=this.options,c=this.$image,d=this.$list;this.isShown&&!this.isPlayed&&!this.isFulled&&b.inline&&(this.isFulled=!0,this.$body.addClass(s),this.$button.addClass(F),b.transition&&(c.removeClass(D),d.removeClass(D)),this.$viewer.addClass(r).removeAttr("style").css("z-index",b.zIndex),this.initContainer(),this.viewer=a.extend({},this.container),this.renderList(),this.initImage(a.proxy(function(){this.renderImage(function(){b.transition&&setTimeout(function(){c.addClass(D),d.addClass(D)},0)})},this)))},exit:function(){var b=this.options,c=this.$image,d=this.$list;this.isFulled&&(this.isFulled=!1,this.$body.removeClass(s),this.$button.removeClass(F),b.transition&&(c.removeClass(D),d.removeClass(D)),this.$viewer.removeClass(r).css("z-index",b.zIndexInline),this.viewer=a.extend({},this.parent),this.renderViewer(),this.renderList(),this.initImage(a.proxy(function(){this.renderImage(function(){b.transition&&setTimeout(function(){c.addClass(D),d.addClass(D)},0)})},this)))},tooltip:function(){var b=this.options,c=this.$tooltip,d=this.image,e=[t,y,D].join(" ");this.isViewed&&!this.isPlayed&&b.tooltip&&(c.text($(100*d.ratio)+"%"),this.tooltiping?clearTimeout(this.tooltiping):b.transition?(this.fading&&c.trigger(M),c.addClass(e),h(c[0]),c.addClass(z)):c.addClass(t),this.tooltiping=setTimeout(a.proxy(function(){b.transition?(c.one(M,a.proxy(function(){c.removeClass(e),this.fading=!1},this)).removeClass(z),this.fading=!0):c.removeClass(t),this.tooltiping=!1},this),1e3))},toggle:function(){1===this.image.ratio?this.zoomTo(this.initialImage.ratio,!0):this.zoomTo(1,!0)},reset:function(){this.isViewed&&!this.isPlayed&&(this.image=a.extend({},this.initialImage),this.renderImage())},update:function(){var b,c=this.$element,d=this.$images,e=[];if(this.isImg){if(!c.parent().length)return this.destroy()}else this.$images=d=c.find(H),this.length=d.length;this.isBuilt&&(a.each(this.$items,function(b){var c=a(this).find("img")[0],f=d[b];f?f.src!==c.src&&e.push(b):e.push(b)}),this.$list.width("auto"),this.initList(),this.isShown&&(this.length?this.isViewed&&(b=a.inArray(this.index,e),b>=0?(this.isViewed=!1,this.view(ca(this.index-(b+1),0))):this.$items.eq(this.index).addClass(B)):(this.$image=null,this.isViewed=!1,this.index=0,this.image=null,this.$canvas.empty(),this.$title.empty())))},destroy:function(){var a=this.$element;this.options.inline?this.unbind():(this.isShown&&this.unbind(),a.off(P,this.start)),this.unbuild(),a.removeData(p)},trigger:function(b,c){var d=a.Event(b,c);return this.$element.trigger(d),d},shown:function(){var b=this.options;this.transitioning=!1,this.isFulled=!0,this.isShown=!0,this.isVisible=!0,this.render(),this.bind(),a.isFunction(b.shown)&&this.$element.one(U,b.shown),this.trigger(U)},hidden:function(){var b=this.options;this.transitioning=!1,this.isViewed=!1,this.isFulled=!1,this.isShown=!1,this.isVisible=!1,this.unbind(),this.$body.removeClass(s),this.$viewer.addClass(u),this.resetList(),this.resetImage(),a.isFunction(b.hidden)&&this.$element.one(W,b.hidden),this.trigger(W)},requestFullscreen:function(){var a=document.documentElement;!this.isFulled||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){this.isFulled&&(document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())},change:function(a){var b=this.endX-this.startX,c=this.endY-this.startY;switch(this.action){case"move":this.move(b,c);break;case"zoom":this.zoom(function(a,b,c,d){var e=_(a*a+b*b),f=_(c*c+d*d);return(f-e)/e}(aa(this.startX-this.startX2),aa(this.startY-this.startY2),aa(this.endX-this.endX2),aa(this.endY-this.endY2)),!1,a),this.startX2=this.endX2,this.startY2=this.endY2;break;case"switch":this.action="switched",aa(b)>aa(c)&&(b>1?this.prev():-1>b&&this.next())}this.startX=this.endX,this.startY=this.endY},isSwitchable:function(){var a=this.image,b=this.viewer;return a.left>=0&&a.top>=0&&a.width<=b.width&&a.height<=b.height}},m.DEFAULTS={inline:!1,button:!0,navbar:!0,title:!0,toolbar:!0,tooltip:!0,movable:!0,zoomable:!0,rotatable:!0,scalable:!0,transition:!0,fullscreen:!0,keyboard:!0,interval:5e3,minWidth:200,minHeight:100,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,zIndex:2015,zIndexInline:0,url:"src",build:null,built:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null},m.setDefaults=function(b){a.extend(m.DEFAULTS,b)},m.TEMPLATE='<div class="viewer-container"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><ul class="viewer-toolbar"><li class="viewer-zoom-in" data-action="zoom-in"></li><li class="viewer-zoom-out" data-action="zoom-out"></li><li class="viewer-one-to-one" data-action="one-to-one"></li><li class="viewer-reset" data-action="reset"></li><li class="viewer-prev" data-action="prev"></li><li class="viewer-play" data-action="play"></li><li class="viewer-next" data-action="next"></li><li class="viewer-rotate-left" data-action="rotate-left"></li><li class="viewer-rotate-right" data-action="rotate-right"></li><li class="viewer-flip-horizontal" data-action="flip-horizontal"></li><li class="viewer-flip-vertical" data-action="flip-vertical"></li></ul><div class="viewer-navbar"><ul class="viewer-list"></ul></div></div><div class="viewer-tooltip"></div><div class="viewer-button" data-action="mix"></div><div class="viewer-player"></div></div>',m.other=a.fn.viewer,a.fn.viewer=function(c){var f,g=e(arguments,1);return this.each(function(){var d,e=a(this),h=e.data(p);if(!h){if(/destroy|hide|exit|stop|reset/.test(c))return;e.data(p,h=new m(this,c))}b(c)&&a.isFunction(d=h[c])&&(f=d.apply(h,g))}),d(f)?this:f},a.fn.viewer.Constructor=m,a.fn.viewer.setDefaults=m.setDefaults,a.fn.viewer.noConflict=function(){return a.fn.viewer=m.other,this}});